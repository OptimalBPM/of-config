{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "definitions": {
        "ArrayExpressionItem": {
            "items": {
                "anyOf": [
                    {
                        "properties": {
                            "VerbSelect": {
                                "$ref": "qal://sql.json#/definitions/VerbSelect"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterExpression": {
                                "$ref": "qal://sql.json#/definitions/ParameterExpression"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterString": {
                                "$ref": "qal://sql.json#/definitions/ParameterString"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterNumeric": {
                                "$ref": "qal://sql.json#/definitions/ParameterNumeric"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterIdentifier": {
                                "$ref": "qal://sql.json#/definitions/ParameterIdentifier"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterCast": {
                                "$ref": "qal://sql.json#/definitions/ParameterCast"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterFunction": {
                                "$ref": "qal://sql.json#/definitions/ParameterFunction"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterIn": {
                                "$ref": "qal://sql.json#/definitions/ParameterIn"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterDataset": {
                                "$ref": "qal://sql.json#/definitions/ParameterDataset"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterCase": {
                                "$ref": "qal://sql.json#/definitions/ParameterCase"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterSet": {
                                "$ref": "qal://sql.json#/definitions/ParameterSet"
                            }
                        }
                    }
                ],
                "type": "object"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayList": {
            "items": {
                "$ref": "*"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterAssignment": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterAssignment"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterColumndefinition": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterColumndefinition"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterCondition": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterCondition"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterConstraint": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterConstraint"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterField": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterField"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterIdentifier": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterIdentifier"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterOrderByItem": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterOrderByItem"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterSource": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterSource"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterString": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterString"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayParameterWhen": {
            "items": {
                "$ref": "qal://sql.json#/definitions/ParameterWhen"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayStatement": {
            "items": {
                "$ref": "qal://sql.json#/definitions/statement"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ArrayString": {
            "items": {
                "type": "string"
            },
            "type": "array"
        },
        "ArrayTabularExpressionItem": {
            "items": {
                "anyOf": [
                    {
                        "properties": {
                            "VerbSelect": {
                                "$ref": "qal://sql.json#/definitions/VerbSelect"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterDataset": {
                                "$ref": "qal://sql.json#/definitions/ParameterDataset"
                            }
                        }
                    },
                    {
                        "properties": {
                            "ParameterSet": {
                                "$ref": "qal://sql.json#/definitions/ParameterSet"
                            }
                        }
                    }
                ],
                "type": "object"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        },
        "ParameterAssignment": {
            "properties": {
                "left": {
                    "$ref": "qal://sql.json#/definitions/condition_part"
                },
                "right": {
                    "$ref": "qal://sql.json#/definitions/condition_part"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterBase": {
            "properties": {
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterCase": {
            "properties": {
                "else_statement": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                },
                "when_statements": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterWhen"
                }
            },
            "type": "object"
        },
        "ParameterCast": {
            "properties": {
                "datatype": {
                    "$ref": "qal://sql.json#/definitions/datatypes"
                },
                "expression": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterColumndefinition": {
            "properties": {
                "datatype": {
                    "$ref": "qal://sql.json#/definitions/datatypes"
                },
                "default": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "notnull": {
                    "type": "boolean"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterCondition": {
            "properties": {
                "and_or": {
                    "$ref": "qal://sql.json#/definitions/and_or"
                },
                "left": {
                    "$ref": "qal://sql.json#/definitions/condition_part"
                },
                "operator": {
                    "type": "string"
                },
                "right": {
                    "$ref": "qal://sql.json#/definitions/condition_part"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterConditions": {
            "properties": {},
            "type": "object"
        },
        "ParameterConstraint": {
            "properties": {
                "checkconditions": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterCondition"
                },
                "constraint_type": {
                    "$ref": "qal://sql.json#/definitions/constraint_types"
                },
                "name": {
                    "type": "string"
                },
                "references": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterIdentifier"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterDDL": {
            "properties": {
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterDataset": {
            "properties": {
                "data_source": {
                    "$ref": "qal://sql.json#/definitions/data_source_types"
                },
                "operator": {
                    "type": "string"
                },
                "resource_uuid": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterExpression": {
            "properties": {
                "expressionitems": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterExpressionItem": {
            "properties": {
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterField": {
            "properties": {
                "alias": {
                    "type": "string"
                },
                "expression": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterFunction": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "operator": {
                    "type": "string"
                },
                "parameters": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterIdentifier": {
            "properties": {
                "identifier": {
                    "type": "string"
                },
                "operator": {
                    "type": "string"
                },
                "prefix": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterIn": {
            "properties": {
                "in_values": {
                    "$ref": "qal://sql.json#/definitions/in_types"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterNumeric": {
            "properties": {
                "numeric_value": {
                    "type": "number"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterOrderByItem": {
            "properties": {
                "direction": {
                    "type": "string"
                },
                "expressionitems": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterParameter": {
            "properties": {
                "datatype": {
                    "$ref": "qal://sql.json#/definitions/datatypes"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterRemotable": {
            "properties": {
                "resource_uuid": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterSet": {
            "properties": {
                "row_separator": {
                    "type": "string"
                },
                "set_operator": {
                    "$ref": "qal://sql.json#/definitions/set_operator"
                },
                "subsets": {
                    "$ref": "qal://sql.json#/definitions/ArrayTabularExpressionItem"
                }
            },
            "type": "object"
        },
        "ParameterSource": {
            "properties": {
                "alias": {
                    "type": "string"
                },
                "conditions": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterCondition"
                },
                "expression": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "join_type": {
                    "$ref": "qal://sql.json#/definitions/join_types"
                },
                "resource_uuid": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterString": {
            "properties": {
                "escape_character": {
                    "type": "string"
                },
                "operator": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                },
                "string_value": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ParameterWhen": {
            "properties": {
                "conditions": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterCondition"
                },
                "result": {
                    "$ref": "qal://sql.json#/definitions/ArrayExpressionItem"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "TabularExpressionItem": {
            "anyOf": [
                {
                    "properties": {
                        "VerbSelect": {
                            "$ref": "qal://sql.json#/definitions/VerbSelect"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterDataset": {
                            "$ref": "qal://sql.json#/definitions/ParameterDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterSet": {
                            "$ref": "qal://sql.json#/definitions/ParameterSet"
                        }
                    }
                }
            ],
            "type": "object"
        },
        "VerbCreateIndex": {
            "properties": {
                "column_names": {
                    "$ref": "qal://sql.json#/definitions/ArrayString"
                },
                "index_type": {
                    "$ref": "qal://sql.json#/definitions/index_types"
                },
                "name": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                },
                "tablename": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "VerbCreateTable": {
            "properties": {
                "columns": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterColumndefinition"
                },
                "constraints": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterConstraint"
                },
                "name": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "VerbCustom": {
            "properties": {
                "row_separator": {
                    "type": "string"
                },
                "sql_db2": {
                    "type": "string"
                },
                "sql_mysql": {
                    "type": "string"
                },
                "sql_oracle": {
                    "type": "string"
                },
                "sql_postgresql": {
                    "type": "string"
                },
                "sql_sqlserver": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "VerbDelete": {
            "properties": {
                "row_separator": {
                    "type": "string"
                },
                "sources": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterSource"
                }
            },
            "type": "object"
        },
        "VerbDropTable": {
            "properties": {
                "name": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "VerbInsert": {
            "properties": {
                "column_identifiers": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterIdentifier"
                },
                "data": {
                    "$ref": "qal://sql.json#/definitions/TabularExpressionItem"
                },
                "destination_identifier": {
                    "$ref": "qal://sql.json#/definitions/ParameterIdentifier"
                },
                "row_separator": {
                    "type": "string"
                }
            },
            "type": "object"
        },
        "VerbSelect": {
            "properties": {
                "fields": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterField"
                },
                "operator": {
                    "type": "string"
                },
                "order_by": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterOrderByItem"
                },
                "resource_uuid": {
                    "type": "string"
                },
                "row_separator": {
                    "type": "string"
                },
                "sources": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterSource"
                },
                "top_limit": {
                    "type": "integer"
                }
            },
            "type": "object"
        },
        "VerbUpdate": {
            "properties": {
                "assignments": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterAssignment"
                },
                "conditions": {
                    "$ref": "qal://sql.json#/definitions/ArrayParameterCondition"
                },
                "row_separator": {
                    "type": "string"
                },
                "table_identifier": {
                    "$ref": "qal://sql.json#/definitions/ParameterIdentifier"
                }
            },
            "type": "object"
        },
        "and_or": {
            "enum": [
                "AND",
                "OR"
            ],
            "type": "string"
        },
        "condition_part": {
            "anyOf": [
                {
                    "properties": {
                        "ParameterConditions": {
                            "$ref": "qal://sql.json#/definitions/ParameterConditions"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterCondition": {
                            "$ref": "qal://sql.json#/definitions/ParameterCondition"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbSelect": {
                            "$ref": "qal://sql.json#/definitions/VerbSelect"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterExpression": {
                            "$ref": "qal://sql.json#/definitions/ParameterExpression"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterString": {
                            "$ref": "qal://sql.json#/definitions/ParameterString"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterNumeric": {
                            "$ref": "qal://sql.json#/definitions/ParameterNumeric"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterIdentifier": {
                            "$ref": "qal://sql.json#/definitions/ParameterIdentifier"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterCast": {
                            "$ref": "qal://sql.json#/definitions/ParameterCast"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterFunction": {
                            "$ref": "qal://sql.json#/definitions/ParameterFunction"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterIn": {
                            "$ref": "qal://sql.json#/definitions/ParameterIn"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterDataset": {
                            "$ref": "qal://sql.json#/definitions/ParameterDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterCase": {
                            "$ref": "qal://sql.json#/definitions/ParameterCase"
                        }
                    }
                },
                {
                    "properties": {
                        "ParameterSet": {
                            "$ref": "qal://sql.json#/definitions/ParameterSet"
                        }
                    }
                }
            ],
            "type": "object"
        },
        "constraint_types": {
            "enum": [
                "NOT NULL",
                "UNIQUE",
                "PRIMARY KEY",
                "FOREIGN KEY",
                "CHECK",
                "DEFAULT"
            ],
            "type": "string"
        },
        "csv_dialects": {
            "enum": [
                "unix",
                "excel-tab",
                "excel"
            ],
            "type": "string"
        },
        "data_source_types": {
            "anyOf": [
                {
                    "properties": {
                        "FlatfileDataset": {
                            "$ref": "qal://sql.json#/definitions/FlatfileDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "XpathDataset": {
                            "$ref": "qal://sql.json#/definitions/XpathDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "MatrixDataset": {
                            "$ref": "qal://sql.json#/definitions/MatrixDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "SpreadsheetDataset": {
                            "$ref": "qal://sql.json#/definitions/SpreadsheetDataset"
                        }
                    }
                },
                {
                    "properties": {
                        "RDBMSDataset": {
                            "$ref": "qal://sql.json#/definitions/RDBMSDataset"
                        }
                    }
                }
            ],
            "type": "object"
        },
        "datatypes": {
            "pattern": "(integer|string|string(\\(.*\\))|serial|timestamp)",
            "type": "string"
        },
        "db_types": {
            "enum": [
                "MySQL",
                "PostgreSQL",
                "Oracle",
                "DB2",
                "SQLserver"
            ],
            "type": "string"
        },
        "in_types": {
            "enum": [
                "VerbSelect",
                "ParameterString"
            ],
            "type": "string"
        },
        "index_types": {
            "enum": [
                "UNIQUE",
                "CLUSTERED",
                "NONCLUSTERED"
            ],
            "type": "string"
        },
        "join_types": {
            "enum": [
                "",
                "INNER",
                "LEFT OUTER",
                "RIGHT OUTER",
                "FULL OUTER",
                "CROSS"
            ],
            "type": "string"
        },
        "quoting": {
            "enum": [
                "QUOTE_MINIMAL",
                "QUOTE_ALL",
                "QUOTE_NONE"
            ],
            "type": "string"
        },
        "set_operator": {
            "enum": [
                "UNION",
                "INTERSECT",
                "DIFFERENCE"
            ],
            "type": "string"
        },
        "statement": {
            "anyOf": [
                {
                    "properties": {
                        "VerbCreateTable": {
                            "$ref": "qal://sql.json#/definitions/VerbCreateTable"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbCreateIndex": {
                            "$ref": "qal://sql.json#/definitions/VerbCreateIndex"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbSelect": {
                            "$ref": "qal://sql.json#/definitions/VerbSelect"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbCustom": {
                            "$ref": "qal://sql.json#/definitions/VerbCustom"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbInsert": {
                            "$ref": "qal://sql.json#/definitions/VerbInsert"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbDelete": {
                            "$ref": "qal://sql.json#/definitions/VerbDelete"
                        }
                    }
                },
                {
                    "properties": {
                        "VerbUpdate": {
                            "$ref": "qal://sql.json#/definitions/VerbUpdate"
                        }
                    }
                }
            ],
            "type": "object"
        },
        "xpath_data_format": {
            "enum": [
                "XML",
                "XHTML",
                "HTML"
            ],
            "type": "string"
        }
    },
    "description": "The JSON Schema for QAL SQL settings",
    "properties": {
        "resources": {
            "$ref": "qal://resources.json#/properties/resources"
        },
        "statement": {
            "$ref": "qal://sql.json#/definitions/statement"
        }
    },
    "required": [
        "statement"
    ],
    "title": "QAL SQL JSON Schema",
    "type": "object",
    "version": "0.5"
}
